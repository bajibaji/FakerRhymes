# FakerRhymes

无情押韵机器人

## 🚀 v1.5.2 更新

- **韵脚精细化分离**：将“人辰辙”拆分为“人辰辙-深”(en, un) 与 “人辰辙-亲”(in, vn, ün)，修正了 `en` 和 `in` 不通的问题。
- **优化宽松匹配算法**：
  - `en/un` 字组优先匹配 `eng/ong` (前后鼻音合并)。
  - `in/vn` 字组优先匹配 `ing`。
- **听感优化**：增加了声母类型过滤，避免平翘舌音带来的听感突变。

### 首次加载词库

1. 点击 "📚 加载词库" 按钮
2. 查看进度条和百分比
3. 完成后显示 "✓ 已加载 XXXX 字"
4. 词库缓存在 `localStorage`，下次打开无需重新加载

### 浏览器兼容性

- ✅ Chrome/Edge 95+
- ✅ Firefox 79+
- ✅ Safari 14.1+
- ✅ 无 Web Worker 支持的老浏览器 - 自动回退

已实施的优化包括：

### 1. Web Worker 后台处理

- ✅ 已创建 `dict-worker.js` - 在独立线程中加载和解析词库
- ✅ 主线程保持响应，用户界面流畅
- ✅ 支持实时进度报告

### 2. 流式下载和分块处理

- ✅ 使用 `ReadableStream` 处理大文件
- ✅ 每 1000 项报告一次进度，实时显示加载百分比
- ✅ 添加进度条和文本提示

### 3. 支持回退方案

- ✅ 如果浏览器不支持 Web Worker，自动降级到改进的同步模式
- ✅ 回退模式中每 5000 项更新一次进度，不完全卡死

### 4. 详细统计显示

- ✅ 加载完成后显示详细的统计信息
- ✅ 支持在浏览器控制台查看完整数据

### `dict-worker.js` 工作流程

```
主线程 → 发送加载请求 → Worker 线程
                    ↓
                 下载文件 (流式)
                    ↓
                 JSON.parse()
                    ↓
                 提取汉字 (定期报告进度)
                    ↓
主线程 ← 接收字数组 ← 完成
 ↓
更新 UI 和 localStorage
```
